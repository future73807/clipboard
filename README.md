# 超级剪贴板系统 (Super Clipboard)

一个功能强大的 Windows 生产力工具，集成了多媒体内容管理、办公文档预览与版本控制、系统级快捷操作以及高安全性的密码管理功能。

## 1. 核心需求与设计

### 1.1 界面与布局
- **全宽主面板**：
    - 主窗口内容区域**占满整个窗口宽度**，移除默认边距，最大化利用屏幕空间。
    - 采用**响应式栅格布局**，自动适配 1080P、2K、4K 等不同分辨率屏幕。
- **智能悬浮窗**：
    - **特性**：支持**拖拽移动**、边缘**调整大小**（Resize）。
    - **尺寸限制**：最小 240×160 px，最大不超过当前屏幕工作区。
    - **自适应**：内容区域根据窗口大小自动重排（Flex/Grid）。
    - **状态记忆**：记录最后的位置和尺寸，应用重启后自动恢复。

### 1.2 数据类型体系
系统必须支持以下七种核心数据类型，并具备统一的基础能力（收藏、悬浮展示、拖拽排序）：

1.  **文本 (Text)**：支持富文本、Markdown渲染。
2.  **图片 (Image)**：支持缩略图预览、原图查看。
3.  **代码片段 (Code)**：支持语法高亮、语言自动检测。
4.  **文件 (File)**：通用文件，记录路径、大小、类型图标。
5.  **快捷方式 (Shortcut)**：系统快捷方式（.lnk）或应用启动项。
6.  **密码 (Password)**：
    - **安全策略**：独立分类，**强制 AES-256 加密存储**。
    - **交互**：移除手动“启动加密”按钮，添加时即加密。查看需二次验证（可选）。
7.  **办公文件 (Office)**：
    - **支持格式**：Word (.docx), Excel (.xlsx), PowerPoint (.pptx), PDF (.pdf)。
    - **功能**：**内置预览器**（无需安装 Office）、**版本管理**、**差异对比**。

### 1.3 办公文件高级特性
- **在线预览**：
    - 支持分页浏览、缩放、目录跳转。
- **版本管理**：
    - 基于文件哈希或时间戳记录变更。
    - 提供历史版本回滚功能。
- **差异对比 (Diff)**：
    - 文本/代码：行级差异高亮。
    - 表格：单元格变更高亮。
    - 幻灯片/PDF：视觉差异标记。

### 1.4 分组与标签系统
- **多级分组**：
    - 适用对象：**文本、图片、代码片段**。
    - 结构：树形结构，支持拖拽改变层级。
- **标签与版本控制**：
    - 适用对象：**文本、图片、代码片段、办公文件**。
    - **联动机制**：打标签操作自动触发当前内容的“版本快照”保存。

### 1.5 数据捕获与集成
- **方式一：右键菜单集成**
    - 在 Windows 资源管理器及系统文本框右键菜单中添加**“添加到超级剪贴板”**。
    - 交互：点击后弹出迷你浮窗，快速编辑标题、选择分类、添加标签。
- **方式二：智能监听**
    - 监听系统复制（Ctrl+C）事件。
    - **轻量确认**：不直接入库，在鼠标附近弹出**微型确认条**（保存/忽略），支持倒计时自动忽略（配置项）。

### 1.6 交互与视觉
- **动画**：列表排序、增删操作需具备平滑过渡动画（Framer Motion / CSS Transitions）。
- **主题**：支持深色/浅色模式切换，字体大小随系统 DPI 缩放。

## 2. 技术指标
- **性能**：
    - 单分类 10,000 条数据下，冷启动渲染 < 600ms。
    - 本地搜索响应时间 < 150ms（使用索引/虚拟滚动）。
- **测试**：
    - 单元测试覆盖率 > 85%。
    - 重点覆盖：加密模块、文件解析预览、版本差异算法。

## 3. 开发任务分解 (Roadmap)

### 3.1 架构与基础设施
- [ ] **数据库重构**
    - [ ] 新增 `groups` 表（树形分组）、`tags` 表（标签）、`versions` 表（版本历史）。
    - [ ] 扩展 `clipboard_history` 表以支持 7 种类型及加密字段。
- [ ] **项目结构调整**
    - [ ] 引入 `react-window` 实现高性能列表渲染。
    - [ ] 引入 `office-viewer` 相关库用于文档预览。

### 3.2 核心功能开发
- [ ] **全宽面板与响应式布局**
    - [ ] 重写 `App.tsx`，实现全宽 Sidebar + Main 布局。
    - [ ] 移除默认边距，实现 Grid/Flex 自适应。
- [ ] **悬浮窗重构**
    - [ ] 独立路由 `/floating`，支持拖拽移动。
    - [ ] 左侧垂直 Tab 布局 + 右侧列表 + 顶部搜索。
- [ ] **七大数据类型基础支持**
    - [ ] 后端支持 Text, Image, Code, File, Shortcut, Password, Office 类型。
    - [ ] 前端图标与卡片展示适配。

### 3.3 高级特性开发
- [ ] **办公文件处理**
    - [ ] Word/Excel/PPT/PDF 预览组件集成。
    - [ ] 差异对比界面 (Diff View)。
- [ ] **分组与标签系统**
    - [ ] 树形分组组件（支持拖拽）。
    - [ ] 标签管理与版本快照联动。

### 3.4 系统集成
- [ ] **右键菜单集成**：添加注册表脚本或 Electron 菜单项。
- [ ] **智能监听**：完善复制后的微型确认条 UI。

## 4. 质量检查清单 (Checklist)

### 界面与布局
- [ ] 主面板宽度是否 100% 占满窗口，无默认内边距？
- [ ] 悬浮窗是否支持拖拽调整大小？
- [ ] 悬浮窗最小尺寸是否为 240x160 px？
- [ ] 悬浮窗最大尺寸是否限制在屏幕工作区内？
- [ ] 悬浮窗拖拽位置是否能在重启后正确恢复？
- [ ] 面板内容是否在不同分辨率下响应式重排？

### 数据类型验证
- [ ] **文本**：能否正确显示富文本/Markdown？
- [ ] **图片**：能否正确显示缩略图，点击查看原图？
- [ ] **代码**：能否自动检测语言并高亮？
- [ ] **文件**：能否正确显示文件名、大小、图标？
- [ ] **快捷方式**：能否正确识别并启动应用？
- [ ] **密码**：
    - [ ] 是否默认 AES-256 加密存储？
    - [ ] 是否移除了手动“启动加密”按钮？
    - [ ] 查看密码是否需要二次确认（可选）？
- [ ] **办公文件**：
    - [ ] Word/Excel/PPT/PDF 能否正常预览？
    - [ ] 是否支持分页、缩放、目录导航？
    - [ ] 差异对比能否高亮显示变更内容？

### 分组与标签功能
- [ ] 文本/图片/代码是否支持多级树形分组？
- [ ] 拖拽分组能否正确调整层级关系？
- [ ] 打标签操作是否自动触发版本快照保存？
- [ ] 是否能回滚到之前的版本？

### 系统集成
- [ ] Windows 右键菜单是否出现“添加到超级剪贴板”？
- [ ] 点击右键菜单项能否弹出迷你面板并正确捕获选中内容？
- [ ] 复制操作（Ctrl+C）是否触发微型确认窗而非直接保存？
- [ ] 确认窗倒计时结束是否自动忽略？

## 5. 构建与运行

### 安装依赖
```bash
npm ci
```

### 开发模式
```bash
npm run dev
```

### 生产构建
```bash
npm run build
```

### 打包安装程序 (Windows)
```bash
npm run build:win
```
